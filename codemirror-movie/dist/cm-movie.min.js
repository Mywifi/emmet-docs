(function(){var e=0,t=["ms","moz","webkit","o"];for(var n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),i=Math.max(0,16-(r-e)),s=window.setTimeout(function(){t(r+i)},i);return e=r+i,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})})(),function(e){function s(){if(!n.length)return;var e=+(new Date),t=[],r,i;for(var o=0;o<n.length;o++){r=n[o];var i=r.options;r.pos===1||r.endTime<=e?(i.step.call(r,r.pos=1),r.stop()):(r.pos=i.easing(e-r.startTime,0,1,i.duration),i.step.call(r,r.pos),t.push(r))}n=t,n.length&&requestAnimationFrame(s)}function o(e){_.indexOf(n,e)==-1&&(n.push(e),n.length==1&&s())}function u(e){this.options=_.extend({},r,e||{});var t=this.options.easing;if(_.isString(t)){if(!i[t])throw'Unknown "'+t+'" easing function';this.options.easing=i[t]}if(!_.isFunction(this.options.easing))throw"Easing should be a function";this._id=_.uniqueId("tw"),this.options.autostart&&this.start()}var t=function(){},n=[],r={duration:500,easing:"linear",step:t,complete:t,autostart:!0},i={linear:function(e,t,n,r){return n*e/r+t},easeInQuad:function(e,t,n,r){return n*(e/=r)*e+t},easeOutQuad:function(e,t,n,r){return-n*(e/=r)*(e-2)+t},easeInOutQuad:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,r){return n*(e/=r)*e*e+t},easeOutCubic:function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},easeInExpo:function(e,t,n,r){return e==0?t:n*Math.pow(2,10*(e/r-1))+t-n*.001},easeOutExpo:function(e,t,n,r){return e==r?t+n:n*1.001*(-Math.pow(2,-10*e/r)+1)+t},easeInOutExpo:function(e,t,n,r){return e==0?t:e==r?t+n:(e/=r/2)<1?n/2*Math.pow(2,10*(e-1))+t-n*5e-4:n/2*1.0005*(-Math.pow(2,-10*--e)+2)+t},easeInElastic:function(e,t,n,r,i,s){var o;return e==0?t:(e/=r)==1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s))+t)},easeOutElastic:function(e,t,n,r,i,s){var o;return e==0?t:(e/=r)==1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*e)*Math.sin((e*r-o)*2*Math.PI/s)+n+t)},easeInOutElastic:function(e,t,n,r,i,s){var o;return e==0?t:(e/=r/2)==2?t+n:(s||(s=r*.3*1.5),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),e<1?-0.5*i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)*.5+n+t)},easeInBack:function(e,t,n,r,i){return i==undefined&&(i=1.70158),n*(e/=r)*e*((i+1)*e-i)+t},easeOutBack:function(e,t,n,r,i){return i==undefined&&(i=1.70158),n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},easeInOutBack:function(e,t,n,r,i){return i==undefined&&(i=1.70158),(e/=r/2)<1?n/2*e*e*(((i*=1.525)+1)*e-i)+t:n/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t},easeInBounce:function(e,t,n,r){return n-$.easing.easeOutBounce(x,r-e,0,n,r)+t},easeOutBounce:function(e,t,n,r){return(e/=r)<1/2.75?n*7.5625*e*e+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,n,r){return e<r/2?$.easing.easeInBounce(x,e*2,0,n,r)*.5+t:$.easing.easeOutBounce(x,e*2-r,0,n,r)*.5+n*.5+t}};u.prototype={start:function(){this.pos=0,this.startTime=+(new Date),this.endTime=this.startTime+this.options.duration,this.animating=!0,o(this)},stop:function(){this.animating=!1,this.options.complete()}},u.__getAnims=function(){return n},e.Tween=u}(this),function(e){"use strict";function n(e){return e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})}function r(e,r){var i=/^-?\d+(?:px)?$/i,s=/^-?\d(?:\.\d+)?/,o=/\d$/,u=n(r);if(e.style[u])return e.style[u];if(t){var a=window.getComputedStyle(e,"");return a.getPropertyValue(r)}if(e.currentStyle){var f=e.currentStyle[r]||e.currentStyle[u],l=e.style||e;if(!i.test(f)&&s.test(f)){var c=l.left,h=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left;var p=o.test(f)?"em":"";l.left=u==="fontSize"?"1em":f+p||0,f=l.pixelLeft+"px",l.left=c,e.runtimeStyle.left=h}return f}}function i(e,t){if(!e)return;var n={"line-height":1,"z-index":1,opacity:1},r=_.map(t,function(e,t){var r=t.replace(/([A-Z])/g,"-$1").toLowerCase();return r+":"+(!_.isNumber(e)||r in n?e:e+"px")});e.style.cssText+=";"+r.join(";")}function s(e){return e.length===+e.length?_.toArray(e):_.isArray(e)?e:[e]}var t=document.defaultView&&document.defaultView.getComputedStyle;_.extend(e,{trim:function(e){return e&&"trim"in String.prototype?e.trim():e.replace(/^\s+/,"").replace(/\s+$/,"")},hasClass:function(e,t){return~(" "+e.className+" ").indexOf(" "+t+" ")},addClass:function(e,t){return _.each(s(e),function(e){var n=_.filter(t.split(/\s+/g),function(t){return t&&!this.hasClass(e,t)},this);n.length&&(e.className+=(e.className?" ":"")+n.join(" "))},this),e},removeClass:function(e,t){var n=/\s+/g;return _.each(s(e),function(e){e.className=_.difference((e.className||"").split(n),t.split(/\s+/g)).join(" ")},this),e},toggleClass:function(e,t,n){return _.each(s(e),function(e){var r=n;_.isUndefined(r)&&(r=this.hasClass(e,t)),r?this.removeClass(e,t):this.addClass(e,t)},this),e},getByClass:function(e,t){return document.getElementsByClassName?(t||document).getElementsByClassName(e):_.filter((t||document).getElementsByTagName("*"),function(t){return this.hasClass(t,e)},this)},remove:function(e){return _.each(s(e),function(e){e.parentNode&&e.parentNode.removeChild(e)}),e},toDOM:function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild},css:function(e,t,n){if(_.isString(t)&&_.isUndefined(n))return r(e,t);if(_.isString(t)){var s={};s[t]=n,t=s}i(e,t)}})}(_.dom={}),CodeMirror.scenario=function(){"use strict";function u(e){var t=["Webkit","Moz","O","ms"],n=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+t.join(n+" ")+n).split(" "),i=document.createElement("div"),s=null;for(var o in r){s=r[o];if(i.style[s]!==undefined)return s}return s}function f(e){if(_.isString(e)){var t=e.split(":");return{name:t.shift(),options:t.join(":")}}var n=_.keys(e)[0];return{name:n,options:e[n]}}function l(e,t,n){if(_.isString(e)){var r={};r[t]=e,e=r}return _.extend(n,e||{})}function c(e,t){if(_.isString(e)){if(e==="caret")return t.getCursor(!0);if(~e.indexOf(":")){var n=e.split(":");return{line:parseInt(n[0],10),ch:parseInt(n[1],10)}}e=parseInt(e,10)}return _.isNumber(e)?t.posFromIndex(e):e}function h(e,t){if(!!t)return setTimeout(e,t);e()}function p(t,n){this._actions=t,this._actionIx=0,this._editor=null,this._state=e,this._timerQueue=[],n&&"getValue"in n&&(this._editor=n);var r=this._editor;r&&!r.__initial&&(r.__initial={content:r.getValue(),pos:r.getCursor(!0)})}var e="idle",t="play",n="pause",r=/\s+/,i=Array.prototype.slice,s={beforeDelay:1e3,afterDelay:1e3},o=function(){var e=document.createElement("div"),t=u("transform");return t?(e.style[t]="translateZ(0)",/translatez/i.test(e.style[t])):!1}(),a={type:function(e,t,n,r){e=l(e,"text",{text:"",delay:60,pos:null});if(!e.text)throw'No text provided for "type" action';e.pos!==null&&t.setCursor(c(e.pos,t));var i=e.text.split("");r(function s(){var o=i.shift();t.replaceSelection(o,"end"),i.length?r(s,e.delay):n()},e.delay)},wait:function(e,t,n,r){e=l(e,"timeout",{timeout:100}),r(n,parseInt(e.timeout,10))},moveTo:function(e,t,n,r){e=l(e,"pos",{delay:80,immediate:!1});if(!e.pos)throw'No position specified for "moveTo" action';var i=t.getCursor(!0);t.setSelection(i,i);var s=c(e.pos,t);if(e.immediate||!e.delay)t.setCursor(s),n();var o=s.line-i.line,u=s.ch-i.ch,a=Math.max(u,o),f=o<0?-1:1,h=u<0?-1:1;r(function p(){i=t.getCursor(!0),a>0&&(i.line!=s.line||i.ch!=s.ch)?(i.line!=s.line&&(i.line+=f),i.ch!=s.ch&&(i.ch+=h),t.setCursor(i),a--,r(p,e.delay)):(t.setCursor(s),n())},e.delay)},jumpTo:function(e,t,n,r){e=l(e,"pos",{afterDelay:200});if(!e.pos)throw'No position specified for "jumpTo" action';t.setCursor(c(e.pos,t)),r(n,e.afterDelay)},run:function(e,t,n,r){e=l(e,"command",{beforeDelay:500,times:1});var i=e.times;r(function s(){try{_.isFunction(e.command)?e.command(t,e):t.execCommand(e.command)}catch(o){}--i>0?r(s,e.beforeDelay):n()},e.beforeDelay)},select:function(e,t,n,r){e=l(e,"to",{from:"caret"});var i=c(e.from,t),s=c(e.to,t);t.setSelection(i,s),n()}};return CodeMirror.commands.revert=function(e){e.__initial&&(e.setValue(e.__initial.content),e.setCursor(e.__initial.pos))},p.prototype={_setup:function(e){return!e&&this._editor&&(e=this._editor),e.execCommand("revert"),e},play:function(e){if(this._state===t)return;if(this._state===n){e=e||this._editor,e.focus();var r=null;while(r=this._timerQueue.shift())h(r.fn,r.delay);this._state=t,this.trigger("resume");return}this._editor=e=this._setup(e),e.focus();var i=_.bind(this.requestTimer,this),o=this;this._actionIx=0;var u=function(){if(o._actionIx>=o._actions.length)return i(function(){o.stop()},s.afterDelay);o.trigger("action",o._actionIx);var t=f(o._actions[o._actionIx++]);if(!(t.name in a))throw"No such action: "+t.name;a[t.name].call(o,t.options,e,u,i)};this._state=t,this._editor.setOption("readOnly",!0),this.trigger("play"),i(u,s.beforeDelay)},pause:function(){this._state=n,this.trigger("pause")},stop:function(){this._state!==e&&(this._state=e,this._timerQueue.length=0,this._editor.setOption("readOnly",!1),this.trigger("stop"))},state:function(){return this._state},toggle:function(){this._state===t?this.pause():this.play()},requestTimer:function(e,n){if(this._state===t)return h(e,n);this._timerQueue.push({fn:e,delay:n})},on:function(e,t,n){var i,s,o,u,a;if(!t)return this;e=e.split(r),i=this._callbacks||(this._callbacks={});while(s=e.shift())a=i[s],o=a?a.tail:{},o.next=u={},o.context=n,o.callback=t,i[s]={tail:u,next:a?a.next:o};return this},off:function(e,t,n){var i,s,o,u,a,f;if(!(s=this._callbacks))return;if(!(e||t||n))return delete this._callbacks,this;e=e?e.split(r):_.keys(s);while(i=e.shift()){o=s[i],delete s[i];if(!o||!t&&!n)continue;u=o.tail;while((o=o.next)!==u)a=o.callback,f=o.context,(t&&a!==t||n&&f!==n)&&this.on(i,a,f)}return this},trigger:function(e){var t,n,s,o,u,a,f;if(!(s=this._callbacks))return this;a=s.all,e=e.split(r),f=i.call(arguments,1);while(t=e.shift()){if(n=s[t]){o=n.tail;while((n=n.next)!==o)n.callback.apply(n.context||this,f)}if(n=a){o=n.tail,u=[t].concat(f);while((n=n.next)!==o)n.callback.apply(n.context||this,u)}}return this}},_.extend(function(e,t){return new p(e,t)},{defineAction:function(e,t){a[e]=t},makeOptions:l,makePos:c,has3d:o,prefixed:u})}(),CodeMirror.scenarioTooltip=function(){"use strict";function i(){var e=document.body,t=document.documentElement,n=t.clientTop||e.clientTop||0,r=t.clientLeft||e.clientLeft||0,i=window.pageYOffset||t.scrollTop||e.scrollTop,s=window.pageXOffset||t.scrollLeft||e.scrollLeft;return{top:i-n,left:s-r,width:e.clientWidth||t.clientWidth,height:e.clientHeight||t.clientHeight}}function s(e,t){t=_.extend({},r,t||{}),_.dom.css(e,{left:0,top:0});var n=_.dom.getByClass(t.tailClass,e)[0],s=0,o=0,u=t.position,a=i(),f=e.offsetWidth,l=e.offsetHeight,c;s=Math.min(a.width-f-t.popupMargin,Math.max(t.popupMargin,u.x-a.left-f/2)),l+n.offsetHeight+t.popupMargin+a.top<u.y?(o=Math.max(0,u.y-l-n.offsetHeight),c=!0):(o=u.y+n.offsetHeight,c=!1);var h=t.tailMargin,p=f-t.tailMargin;n.style.left=Math.min(p,Math.max(h,u.x-s-a.left))+"px",_.dom.css(e,{left:s,top:o}),_.dom.toggleClass(e,t.belowClass,c)}function o(e,i){i=_.extend({},r,i||{});var s=n.prefixed("transformOrigin"),o=n.prefixed("transform"),u=e.style,a=_.dom.getByClass(i.tailClass,e)[0],f=_.dom.css(a,"left"),l=a.offsetTop;_.dom.hasClass(e,i.belowClass)&&(l-=a.offsetHeight),l+="px",u[s]=f+" "+l;var c=n.has3d?"translateZ(0) ":"";return t=new Tween({duration:800,easing:"easeOutElastic",step:function(e){u[o]=c+"scale("+e+")"},complete:function(){u[o]="none",t=null,i.onComplete&&i.onComplete(e)}})}function u(e,t){var n=e.style;return new Tween({duration:200,easing:"linear",step:function(e){n.opacity=1-e},complete:function(){_.dom.remove(e),t.onComplete&&t.onComplete(e)}})}function a(t,r,i){f(),e=_.dom.toDOM('<div class="CodeMirror-tooltip"><div class="CodeMirror-tooltip__content">'+t+"</div>"+'<div class="CodeMirror-tooltip__tail"></div>'+"</div>"),_.dom.css(e,n.prefixed("transform"),"scale(0)"),document.body.appendChild(e),s(e,{position:r}),o(e,{onComplete:i})}function f(n){e?(t&&(t.stop(),t=null),u(e,{onComplete:n}),e=null):n&&n()}function l(e,t){if(e==="caret")return c(t.cursorCoords(!0));if(_.isObject(e)){if("x"in e&&"y"in e)return e;if("left"in e&&"top"in e)return c(e)}return c(t.charCoords(n.makePos(e)))}function c(e){return"left"in e&&(e.x=e.left),"top"in e&&(e.y=e.top),e}var e=null,t=null,n=CodeMirror.scenario,r={tailClass:"CodeMirror-tooltip__tail",belowClass:"CodeMirror-tooltip_below",popupMargin:5,tailMargin:11};return n.defineAction("tooltip",function(e,t,r,i){e=n.makeOptions(e,"text",{wait:4e3,pos:"caret"});var s=l(e.pos,t);a(e.text,s,function(){i(function(){f(function(){i(r)})},e.wait)})}),n.defineAction("showTooltip",function(e,t,r,i){e=n.makeOptions(e,"text",{pos:"caret"}),a(e.text,l(e.pos,t)),r()}),n.defineAction("hideTooltip",function(e,t,n,r){f(n)}),{show:a,hide:f}}(),CodeMirror.scenarioOutline=function(){"use strict";var e={wrapperTemplate:'<ul class="CodeMirror-outline"><%= content %></ul>',itemTemplate:'<li data-action-id="<%= id %>" class="CodeMirror-outline__item"><%= title %></li>',itemClass:"CodeMirror-outline__item",selectedClass:"CodeMirror-outline__item_selected"};return function(t,n,r){r=_.extend({},e,r||{});var i=_.keys(t);i.sort(function(e,t){return parseInt(e,10)-parseInt(t,10)});var s=_.template(r.itemTemplate),o=_.map(i,function(e){return s({title:t[e],id:e})}),u=_.dom.toDOM(_.template(r.wrapperTemplate,{content:o.join("")}));return r.target&&r.target.appendChild(u),n.on("action",function(e){var t=_.dom.getByClass(r.itemClass,u),n=_.find(t,function(t){return t.getAttribute("data-action-id")==e});n&&(_.dom.removeClass(t,r.selectedClass),_.dom.addClass(n,r.selectedClass))}).on("stop",function(){_.dom.removeClass(_.dom.getByClass(r.itemClass,u),r.selectedClass)}),u}}(),CodeMirror.scenarioPrompt=function(){"use strict";function i(n,r,i){s(),e=_.dom.toDOM('<div class="CodeMirror-prompt"><div class="CodeMirror-prompt__title">'+n+"</div>"+'<input type="text" name="prompt" class="CodeMirror-prompt__input" readonly="readonly" />'+"</div>"),t=_.dom.toDOM('<div class="CodeMirror-prompt__shade"></div>'),r.appendChild(e),r.appendChild(t),o(e,t,{onComplete:i})}function s(r){e?(n&&(n.stop(),n=null),u(e,t,{onComplete:r}),e=t=null):r&&r()}function o(e,t,i){i=i||{};var s=r.prefixed("transform"),o=e.style,u=t.style,a=e.offsetHeight,f=_.template(r.has3d?"translate3d(0, <%= pos %>, 0)":"translate(0, <%= pos %>)");return u.opacity=0,new Tween({duration:200,step:function(e){u.opacity=e}}),o[s]=f({pos:-a}),n=new Tween({duration:400,easing:"easeOutCubic",step:function(e){o[s]=f({pos:-a*(1-e)+"px"})},complete:function(){n=null,i.onComplete&&i.onComplete(e,t)}})}function u(e,t,n){var i=e.style,s=t.style,o=e.offsetHeight,u=r.prefixed("transform"),a=_.template(r.has3d?"translate3d(0, <%= pos %>, 0)":"translate(0, <%= pos %>)");return new Tween({duration:200,step:function(e){i[u]=a({pos:-o*e+"px"}),s.opacity=1-e},complete:function(){_.dom.remove([e,t]),n.onComplete&&n.onComplete(e,t)}})}function a(e,t,n,r){var i=t.text.split("");n(function s(){e.value+=i.shift(),i.length?n(s,t.delay):r()},t.delay)}var e=null,t=null,n=null,r=CodeMirror.scenario;r.defineAction("prompt",function(e,t,n,o){e=r.makeOptions(e,"text",{title:"Enter something",delay:80,typeDelay:1e3,hideDelay:2e3}),i(e.title,t.getWrapperElement(),function(t){o(function(){a(_.dom.getByClass("CodeMirror-prompt__input",t)[0],e,o,function(){o(function(){s(n)},e.hideDelay)})},e.typeDelay)})})}(),function(){"use strict";function s(e,i){i=i||{};var s=/ctrl|alt|shift|cmd/i,o=t?n:r;return e.replace(/\((.+?)\)/g,function(e,n){if(s.test(n)){var r=_.map(n.toLowerCase().split(/[\-\+]/),function(e){return o[e.toLowerCase()]||e.toUpperCase()});e=r.join(t?"":"+"),i.stripParentheses||(e="("+e+")")}return e})}function o(e){try{return(new Function("return "+e))()}catch(t){return{}}}function u(e){var t="\n",n=(e||"").replace(/\r\n/g,t).replace(/\n\r/g,t).replace(/\r/g,t).split(t);return _.filter(n,function(e){return!!e})}function a(e){var t={"&lt;":"<","&gt;":">","&amp;":"&"};return e.replace(/&(lt|gt|amp);/g,function(e,n){return t[e]||e})}function f(e,t){t=_.extend({},i,t||{});var n=e.split(t.sectionSeparator),r=/^(\w+)\s*:\s*(.+)$/,f=[],l={},c={};return _.each(u(n[1]),function(e){if(e.charAt(0)=="#")return;e=e.replace(t.outlineSeparator,function(e,n){return t.prettifyKeys&&(l[f.length]=s(_.dom.trim(n))),""});var n=e.match(r);if(!n)return f.push(_.dom.trim(e));if(n[2].charAt(0)=="{"){var i={};return i[n[1]]=o(a(n[2])),f.push(i)}f.push(n[1]+":"+a(n[2]))}),n[2]&&_.each(u(n[2]),function(e){if(e.charAt(0)=="#")return;var t=e.match(r);t&&(c[t[1]]=t[2])}),{value:a(_.dom.trim(n[0])),scenario:f,outline:_.keys(l).length?l:null,editorOptions:c}}var e=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),t=e||/Mac/.test(navigator.platform),n={ctrl:"⌃",control:"⌃",cmd:"⌘",shift:"⇧",alt:"⌥",enter:"⏎",tab:"⇥",left:"←",right:"→",up:"↑",down:"↓"},r={cmd:"Ctrl",control:"Ctrl",ctrl:"Ctrl",alt:"Alt",shift:"Shift",left:"←",right:"→",up:"↑",down:"↓"},i={parse:!0,sectionSeparator:"@@@",outlineSeparator:/\s+:::\s+(.+)$/,prettifyKeys:!0,stripParentheses:!1};CodeMirror.movie=function(e,t,n){var r=null;_.isString(e)&&(e=document.getElementById(e)),t=_.extend({},i,t||{}),n=_.extend({theme:"espresso",mode:"text/html",indentWithTabs:!0,tabSize:4,lineNumbers:!0,onCursorActivity:function(){a.setLineClass&&(a.setLineClass(r,null,null),r=a.setLineClass(a.getCursor().line,null,"activeline"))},onKeyEvent:function(e,t){if(e.getOption("readOnly"))return t.stop(),!0}},n||{});var s=n.value||e.value||"";if(t.parse){_.extend(t,f(s,t)),s=t.value,t.editorOptions&&_.extend(n,t.editorOptions);var o=/^data\-cm\-(.+)$/i;_.each(e.attributes,function(e){o.test(e.name)&&(n[RegExp.$1]=e.value)})}s=s.replace(/\r?\n/g,"\n");var u=s.indexOf("|");e.value=n.value=s=s.replace(/\|/g,"");var a=CodeMirror.fromTextArea(e,n);a.setLineClass&&(r=a.setLineClass(0,"activeline")),u!=-1&&a.setCursor(a.posFromIndex(u)),a.__initial={content:s,pos:a.getCursor(!0)};var l=a.getWrapperElement();n.height&&(l.style.height=n.height+"px"),l.className+=" CodeMirror-movie"+(t.outline?" CodeMirror-movie_with-outline":"");var c=CodeMirror.scenario(t.scenario,a);return t.outline&&(l.className+=" CodeMirror-movie_with-outline",l.appendChild(CodeMirror.scenarioOutline(t.outline,c))),c}}();