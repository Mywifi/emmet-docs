<!DOCTYPE html>
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="edge, chrome=1" />
<title>过滤器</title>
<link rel="shortcut icon" href="../favicon.ico" />

<link rel="stylesheet" href="../c/main.css" />

<script>document.write('<script src="../j/' + ('__proto__' in {} ? 'zepto.min' : 'jquery-1.8.2.min') + '.js"><\/script>')</script>

<script src="../j/movie.js"></script>

<script src="../j/main.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
</head>
<body>
	<div class="wrapper">
		<header class="page-header">
			<h1 class="site-title">
			
				<a href="../">Emmet 文档</a>
			
			</h1>
			<p class="back-to-main"><a href="http://emmet.io">Emmet 官方网站</a></p>
			<div id="carbonads-container"><div class="carbonad"><div id="azcarbon"></div></div></div>
			<nav>
				

<ul class="nav">
	
		<li class="nav__item">
			
				<a href="../abbreviations/">缩写</a>
			
			
				
<ul class="nav">
	
		<li class="nav__item">
			
				<a href="../abbreviations/syntax/">语法</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../abbreviations/types/">元素类型</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../abbreviations/implicit-names/">隐式标签名</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../abbreviations/lorem-ipsum/">“Lorem Ipsum” 生成器</a>
			
			
		</li>
	
</ul>	

			
		</li>
	
		<li class="nav__item">
			
				<a href="../css-abbreviations/">CSS 缩写</a>
			
			
				
<ul class="nav">
	
		<li class="nav__item">
			
				<a href="../css-abbreviations/vendor-prefixes/">厂商前缀</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../css-abbreviations/gradients/">渐变</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../css-abbreviations/fuzzy-search/">模糊查找</a>
			
			
		</li>
	
</ul>	

			
		</li>
	
		<li class="nav__item">
			
				<a href="../actions/">功能</a>
			
			
				
<ul class="nav">
	
		<li class="nav__item">
			
				<a href="../actions/expand-abbreviation/">展开缩写</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../actions/match-pair/">匹配标签</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../actions/go-to-pair/">跳转到配对标签</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../actions/wrap-with-abbreviation/">包裹缩写</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../actions/go-to-edit-point/">跳转到编辑点</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../actions/select-item/">选择</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../actions/toggle-comment/">切换注释</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../actions/split-join-tag/">分割合并标签</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../actions/remove-tag/">删除标签</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../actions/merge-lines/">合并行</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../actions/update-image-size/">更新图片尺寸</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../actions/evaluate-math/">计算数学表达式</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../actions/inc-dec-number/">增减数字</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../actions/reflect-css-value/">重构 CSS 值</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../actions/base64/">编码/解码图像为 data:URL</a>
			
			
		</li>
	
</ul>	

			
		</li>
	
		<li class="nav__item nav__item_selected">
			
				<strong>过滤器</strong>
			
			
				
<ul class="nav">
	
		<li class="nav__item">
			
				<a href="../filters/bem/">Yandex BEM/OOCSS</a>
			
			
		</li>
	
</ul>	

			
		</li>
	
		<li class="nav__item">
			
				<a href="../customization/">配置</a>
			
			
				
<ul class="nav">
	
		<li class="nav__item">
			
				<a href="../customization/snippets/">snippets.json</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../customization/preferences/">preferences.json</a>
			
			
		</li>
	
		<li class="nav__item">
			
				<a href="../customization/syntax-profiles/">syntaxProfiles.json</a>
			
			
		</li>
	
</ul>	

			
		</li>
	
		<li class="nav__item">
			
				<a href="../cheat-sheet/">Cheat Sheet</a>
			
			
		</li>
	
</ul>	

			</nav>
		</header>
		<section class="page-content">
			<h1><a name="" href="#" class="anchor"></a>过滤器</h1>
<p>Filters are special post-processors that modify expanded abbreviation right before output to the editor. To better understand how filters work, let’s walk through a simple tutorial.</p>
<p>过滤器在输出发给编辑器之前修改缩写的展开结果。为了更好的理解过滤器是怎样工作的，下面讲一个简单例子。</p>
<p>Try to expand the following abbreviation in the editor below (use Tab key to expand abbreviation): <code>#content&gt;p.title</code></p>
<p>在编辑器里展开缩写：<code>#content&gt;p.title</code></p>
<textarea class="cm-box" data-height="150"></textarea>

<p>As you may expect, it will be expanded into the following HTML code:</p>
<pre><code><span class="xml"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"content"</span>></span>
    <span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"title"</span>></span><span class="tag">&lt;/<span class="title">p</span>></span>
<span class="tag">&lt;/<span class="title">div</span>></span></span></code></pre>
<p>Now, try to expand this abbreviation: <code>#content&gt;p.title|e</code>. You’ll have a slightly different result:</p>
<p>再展开这个缩写：<code>#content&gt;p.title|e</code>，结果有点不同：</p>
<pre><code class="lang-xml"><span class="xml">&amp;lt;div id="content"&amp;gt;
    &amp;lt;p class="title"&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/div&amp;gt;</span></code></pre>
<p>We’ve just applied <code>e</code> (escape) filter by appending its name after pipe character. This filter had escaped all XML-unsafe symbols with entities right before Emmet sent output to the editor. Now, try this one:  <code>#content&gt;p.title|e|e</code>:</p>
<p>这里使用了 <code>e</code> (escape) 过滤器，将过滤器名字放在管道符后面。这个过滤器在 Emmet 将输出发送给编辑器之前把所有 XML 不安全字符转换为实体。试试这个：<code>#content&gt;p.title|e|e</code></p>
<pre><code class="lang-xml"><span class="xml">&amp;amp;lt;div id="content"&amp;amp;gt;
    &amp;amp;lt;p class="title"&amp;amp;gt;&amp;amp;lt;/p&amp;amp;gt;
&amp;amp;lt;/div&amp;amp;gt;</span></code></pre>
<p>We have a double-escaped code (e.g. we’ve applied <code>e</code> filter twice). As you can see, we can apply as many filters to abbreviation as we want, and as many times as we want.</p>
<p>代码被双重转义。如你所见，可以对缩写使用多个过滤器，或多次使用。</p>
<p>Let’s do something more interesting. Try to expand this abbreviation: <code>#content&gt;p.title|haml</code></p>
<p>来点更有意思的。展开这个缩写：<code>#content&gt;p.title|haml</code></p>
<pre><code><span class="vala"><span class="preprocessor">#content</span>
    %p.title</span></code></pre>
<p>Isn’t it nice? We&#39;ve just expanded abbreviation as a HAML template!</p>
<p>是不是不错？缩写展开为 HAML 模板！</p>
<p>As you can see, filtering is a key concept of Emmet. To draw an analogy with the browser’s DOM model, every time you expand abbreviation it first gets transformed into a tree and then filter walks on each tree node and modifies its output. Filters can do anything: from small tweaks as placing whitespace after CSS-rule to more complex tasks as outputting result in different syntax. Even HTML output is defined as <code>html</code> filter.</p>
<p>如你所见，过滤是 Emmet 的一个关键概念。类似于浏览器 DOM 树，缩写先转换为树，然后过滤器遍历树的节点，修改输出。过滤器能做任何事： 小到 CSS 规则是否放空格，大到复杂的任务，例如以不同的语法输出，即使 HTML 定义使用 <code>html</code> 过滤器。</p>
<h2><a name="implicit-filter-call-" href="#implicit-filter-call-" class="anchor"></a>Implicit filter call 隐式地使用过滤器</h2>
<p>You can apply filter to abbreviation explicitly, by adding pipe character and its name right after abbreviation. But filters also can be applied implicitly, depending on document type you&#39;re currently editing. You don’t want to append <code>|haml</code> every time you expand abbreviation in HAML document, right?</p>
<p>可以显式地使用过滤器，将过滤器名字与管道符放在缩写后面。也可以隐式地使用过滤器，这取决于当前文档的类型。你不想在 HAML 文件下每次展开缩写时都添加 <code>|haml</code> 吧？</p>
<p>Default filters are defined in <a href="https://github.com/emmetio/emmet/blob/master/snippets.json">snippets.json</a> file in <code>filters</code> section of each syntax:</p>
<p>在 <a href="https://github.com/emmetio/emmet/blob/master/snippets.json">snippets.json</a> 文件 <code>filters</code> 处为语法定义默认的过滤器：</p>
<pre><code><span class="r">{
    <span class="keyword">...</span>
    <span class="string">"html"</span>: {
        <span class="keyword">...</span>
        <span class="string">"filters"</span>: <span class="string">"html"</span>
    }
}</span></code></pre>
<p>If there’s no such section, <code>html</code> filter is applied by default. If you want to apply more than one filter by default, you can write a comma- or pipe-separated list of filter names in <code>filters</code> section:</p>
<p>如果没有，默认使用 <code>html</code> 过滤器。如果想使用多个过滤器，则指定一个列表，用逗号或管道符分隔过滤器的名字：</p>
<pre><code><span class="r">{
    <span class="keyword">...</span>
    <span class="string">"html"</span>: {
        <span class="keyword">...</span>
        <span class="string">"filters"</span>: <span class="string">"html, e"</span>
    }
}</span></code></pre>
<p>Now, every time you expand abbreviation in HTML document, <code>html</code> and <code>e</code> filters will be applied by default.</p>
<p>这样之后在 HTML 文档下展开缩写时，将默认使用 <code>html</code> 与 <code>e</code> 过滤器。</p>
<p><strong>But be careful!</strong> You always have to place one of the syntax filter—<code>html</code> or <code>haml</code>—at first place of default filters in <code>snippets.json</code> file, otherwise you’ll have empty output because syntax filters are defining primary output result.</p>
<p><strong>注意！</strong>必须将语法过滤器 <code>html</code> 或 <code>haml</code> 放在第一位。否则输出为空，因为语法过滤器定义主要的输出。</p>
<h2><a name="available-filters-" href="#available-filters-" class="anchor"></a>Available filters 可用过滤器</h2>
<h3><a name="haml-syntax-haml" href="#haml-syntax-haml" class="anchor"></a>HAML syntax: <code>haml</code></h3>
<p>HAML syntax filter: output abbreviation as HAML template. Applies by default for HAML files.</p>
<p>HAML 语法过滤器：缩写输出为 HAML 模板，默认应用于HAML 文件。</p>
<h3><a name="html-syntax-html" href="#html-syntax-html" class="anchor"></a>HTML syntax: <code>html</code></h3>
<p>HTML syntax filter: outputs abbreviation as HTML/XML tags. Applies by default everywhere except HAML files.</p>
<p>HTML 语法过滤器：缩写输出为 HTML/XML 标签，默认应用于除了 HAML 文件之外的所有地方。</p>
<h3><a name="escape-e-" href="#escape-e-" class="anchor"></a>Escape: <code>e</code> 转义</h3>
<p>Escapes XML-unsafe characters: <code>&lt;</code>, <code>&gt;</code> and <code>&amp;</code>.</p>
<p>转义 XML 不安全字符：<code>&lt;</code>, <code>&gt;</code> 和 <code>&amp;</code>。</p>
<p>For example, <code>div#header|e</code> will be expanded into <code>&amp;lt;div id=&quot;header&quot;&amp;gt;&amp;lt;/div&amp;gt;</code>. This filter will be extremely useful for tech bloggers/writers who wants to show code snippets on website (if you add Emmet support into you CMS, of course).</p>
<p>例如 <code>div#header|e</code> 展开为 <code>&amp;lt;div id=&quot;header&quot;&amp;gt;&amp;lt;/div&amp;gt;</code>。当科技博客或作者想在网站上展示代码时，这个过滤器就非常有用（当然要在 CMS 里添加 Emmet 支持）。</p>
<h3><a name="comment-tags-c-" href="#comment-tags-c-" class="anchor"></a>Comment tags: <code>c</code> 注释</h3>
<p>Add comments around important tags. By default, “important tags” are those tags with <code>id</code> and/or <code>class</code> attribute.</p>
<p>为重要标签添加注释。“重要标签”默认为有 <code>id</code> 或 <code>class</code> 属性的标签：</p>
<pre><code><span class="axapta"><span class="keyword">div</span>><span class="keyword">div</span><span class="preprocessor">#page>p.title+p|c</span></span></code></pre>
<p>...will be expanded into</p>
<pre><code><span class="xml"><span class="tag">&lt;<span class="title">div</span>></span>
    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"page"</span>></span>
        <span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"title"</span>></span><span class="tag">&lt;/<span class="title">p</span>></span>
        <span class="comment">&lt;!-- /.title --></span>
        <span class="tag">&lt;<span class="title">p</span>></span><span class="tag">&lt;/<span class="title">p</span>></span>
    <span class="tag">&lt;/<span class="title">div</span>></span>
    <span class="comment">&lt;!-- /#page --></span>
<span class="tag">&lt;/<span class="title">div</span>></span></span></code></pre>
<p>This filter has a number of <a href="../customization/preferences/">preferences</a> you can re-define:</p>
<p>这个过滤器有若干<a href="../customization/preferences/">配置</a>：</p>
<ul>
<li><code>filter.commentTrigger</code>: list of attributes that should trigger comment output. Default value is <code>id, class</code></li>
<li><code>filter.commentTrigger</code>: 触发注释的属性列表。默认值 <code>id, class</code></li>
<li><code>filter.commentAfter</code>: a <a href="http://underscorejs.org/#template">ERB-style template</a> of comment that should be placed right <em>after</em> “important tag”. Default value is <code>\n&lt;!-- /&lt;%= attr(&quot;id&quot;, &quot;#&quot;) %&gt;&lt;%= attr(&quot;class&quot;, &quot;.&quot;) %&gt; --&gt;</code></li>
<li><code>filter.commentAfter</code>: 对于 <a href="http://underscorejs.org/#template">ERB 风格模板</a>，注释应当放在“重要标签”之后，默认值 <code>\n&lt;!-- /&lt;%= attr(&quot;id&quot;, &quot;#&quot;) %&gt;&lt;%= attr(&quot;class&quot;, &quot;.&quot;) %&gt; --&gt;</code></li>
<li><code>filter.commentBefore</code>: 对于 ERB 风格模板，注释应当放在“重要标签”之前，默认值为空。</li>
</ul>
<h3><a name="xsl-tuning-xsl" href="#xsl-tuning-xsl" class="anchor"></a>XSL tuning: <code>xsl</code></h3>
<p>This filter removes <code>select</code> attribute from <code>&lt;xsl:variable&gt;</code> and <code>&lt;xsl:with-param&gt;</code> tags <em>if they have child nodes</em>. For example:</p>
<p>当 <code>&lt;xsl:variable&gt;</code> 与 <code>&lt;xsl:with-param&gt;</code> 标签有子节点时这个过滤器将移除它们的 <code>select</code> 属性。例如：</p>
<pre><code><span class="http"><span class="attribute">ap>wp</span></code></pre>
<p>will be expanded into</p>
<pre><code><span class="xml"><span class="tag">&lt;<span class="title">xsl:apply-templates</span> <span class="attribute">select</span>=<span class="value">""</span> <span class="attribute">mode</span>=<span class="value">""</span>></span>
    <span class="tag">&lt;<span class="title">xsl:with-param</span> <span class="attribute">name</span>=<span class="value">""</span> <span class="attribute">select</span>=<span class="value">""</span>/></span>
<span class="tag">&lt;/<span class="title">xsl:apply-templates</span>></span></span></code></pre>
<p>But</p>
<pre><code><span class="http"><span class="attribute">ap>wp>call</span></code></pre>
<p>...will be expanded into</p>
<pre><code><span class="xml"><span class="tag">&lt;<span class="title">xsl:apply-templates</span> <span class="attribute">select</span>=<span class="value">""</span> <span class="attribute">mode</span>=<span class="value">""</span>></span>
    <span class="tag">&lt;<span class="title">xsl:with-param</span> <span class="attribute">name</span>=<span class="value">""</span>></span>
        <span class="tag">&lt;<span class="title">xsl:call-template</span> <span class="attribute">name</span>=<span class="value">""</span>/></span>
    <span class="tag">&lt;/<span class="title">xsl:with-param</span>></span>
<span class="tag">&lt;/<span class="title">xsl:apply-templates</span>></span></span></code></pre>
<p>Applies by default in XSL files.</p>
<p>XSL 文件默认使用。</p>
<h3><a name="single-line-s-" href="#single-line-s-" class="anchor"></a>Single line: <code>s</code> 单行</h3>
<p>Outputs transformed abbreviation as a single line of code. Useful for writing template strings in programming languages like JavaScript, Python, Ruby etc. For example:</p>
<p>将缩写输出为单行。对书写 JavaScript, Python, Ruby 等编程语言比较有用，例如：</p>
<p><code>ul&gt;li*4|s</code></p>
<p>...will be expanded into</p>
<pre><code><span class="xml"><span class="tag">&lt;<span class="title">ul</span>></span><span class="tag">&lt;<span class="title">li</span>></span><span class="tag">&lt;/<span class="title">li</span>></span><span class="tag">&lt;<span class="title">li</span>></span><span class="tag">&lt;/<span class="title">li</span>></span><span class="tag">&lt;<span class="title">li</span>></span><span class="tag">&lt;/<span class="title">li</span>></span><span class="tag">&lt;<span class="title">li</span>></span><span class="tag">&lt;/<span class="title">li</span>></span><span class="tag">&lt;/<span class="title">ul</span>></span></span></code></pre>
<h3><a name="trim-line-markers-t-" href="#trim-line-markers-t-" class="anchor"></a>Trim line markers: <code>t</code> 删除行标记</h3>
<p>Useful for wrapping abbreviations only: removes line markers from wrapped lines, as described in “<a href="../actions/wrap-with-abbreviation/">Wrap with Abbreviation</a>” action.</p>
<p>只对包装缩写有用： 说明见“<a href="../actions/wrap-with-abbreviation/">包装缩写</a>”功能。</p>

		</section>
		<div class="clear"></div>
		<footer class="page-footer">
			<p class="small-text"><a href="https://github.com/yanxyz/emmet-docs">source</a><br />翻译版权 <a href="http://creativecommons.org/licenses/by/3.0/cn/">CC BY 3.0 CN</a>
			</p>
		</footer>
	</div>
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-20314275-3', 'yanxyz.github.io');
	ga('send', 'pageview');

	if (typeof NO_ADS === 'undefined') {
		var z = document.createElement("script"); z.type = "text/javascript"; z.async = true; z.src = "http://engine.carbonads.com/z/50357/azcarbon_2_1_0_HORIZ"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(z, s);
	}
</script>
</body>
</html>